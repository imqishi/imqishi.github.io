<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Leetcode 376. Wiggle Subsequence | Nick's Recycle bin</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"><script>var GLOBAL = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><link rel="icon" href="/favicon.ico"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#题目"><span class="toc-number">1.</span> <span class="toc-text">题目</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#分析"><span class="toc-number">2.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#代码"><span class="toc-number">3.</span> <span class="toc-text">代码</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="img/avatar.jpg"></div><div class="author-info__name text-center">Nick</div><div class="author-info__description text-center">弱者 总是为他们的失败找理由 而他们本身就是最好的理由</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">51</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">20</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true);"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Nick's Recycle bin</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">Leetcode 376. Wiggle Subsequence</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-05-10 </time></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>把一个波动序列定义为：如果相连的数字两两的差值为正数、负数交替。比如  <code>1 7 4 9 2 5</code> 就是一个波动数列。注意，如果只有两个不同数字，那么我们认为这也是一个波动序列。</p>
<p>给出一个数组，求里面最长的波动子序列长度，注意这个子序列中的数字在原数组中并不一定是连续的。如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Input: [1,7,4,9,2,5]</div><div class="line">Output: 6</div><div class="line">The entire sequence is a wiggle sequence.</div><div class="line"></div><div class="line">Input: [1,17,5,10,13,15,10,5,16,8]</div><div class="line">Output: 7</div><div class="line">There are several subsequences that achieve this length. One is [1,17,10,13,10,16,8].</div><div class="line"></div><div class="line">Input: [1,2,3,4,5,6,7,8,9]</div><div class="line">Output: 2</div></pre></td></tr></table></figure>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>只走一遍取得最大值，首先想到的是贪心的思想，每找到一个符合的数字就加入到子序列中，当不符合的时候就把子序列中的最后一个数字改为当前数字，走到最后的时候的长度就是答案。</p>
<p>反问一下，这真的是答案吗？开始的时候我也对这个思路产生了怀疑。会不会有这种情况出现，比如第一对数字符合波动的要求，但是他们和之后的数字“不兼容”，也即后面存在一个更长的波动子序列，与前面的无法组合匹配，因为我们是从前往后开始计算子序列的，所以首先要考虑的就是这种情况是否存在。</p>
<p>假设这种情况存在，也即存在 p q x y z 五个数字，满足下列条件：</p>
<ol>
<li>p 和 q 组成长度为2的波动数， x y z 组成长度为3的波动数且两个波动数不能再发生组合</li>
<li>p &gt; q</li>
<li>x \&lt; y &gt; z</li>
<li>p &lt; x（ p &lt; x 一定有 p &lt; y）</li>
<li>p &lt; z</li>
</ol>
<p>我们分析一下就可以发现这种情况是不可能存在的，因为 q &lt; x &lt; y 那么 p q y z 就可以组合成一个更长的。</p>
<p>更为通用的分析是，假设 x \&lt; y &gt; z 已经存在，我们往 x 前面加一个数字 p：</p>
<ol>
<li>如果 p &lt; x，那么 p y z 就是一个相同长度的子序列</li>
<li>如果 p &gt; x，那么p x y z 就是一个更长的子序列</li>
</ol>
<p>因此，第一个数字是一定会包含在子序列中的，这也证明了为什么我们可以从前两个数字作为初始情况计算。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">wiggleMaxLength</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (nums.length &lt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> nums.length;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (k &lt; nums.length - <span class="number">1</span> &amp;&amp; nums[k] == nums[k + <span class="number">1</span>]) &#123;</div><div class="line">        k ++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (k == nums.length - <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> res = <span class="number">2</span>;</div><div class="line">    <span class="keyword">boolean</span> needBig = nums[k] &lt; nums[k + <span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = k + <span class="number">1</span>; i &lt; nums.length - <span class="number">1</span>; i ++) &#123;</div><div class="line">        <span class="keyword">if</span> (needBig &amp;&amp; nums[i] &gt; nums[i + <span class="number">1</span>]) &#123;</div><div class="line">            nums[res] = nums[i + <span class="number">1</span>];</div><div class="line">            res ++;</div><div class="line">            needBig = ! needBig;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (! needBig &amp;&amp; nums[i] &lt; nums[i + <span class="number">1</span>]) &#123;</div><div class="line">                nums[res] = nums[i + <span class="number">1</span>];</div><div class="line">                res ++;</div><div class="line">                needBig = ! needBig;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/leetcode/">leetcode</a></div></article><nav id="pagination"><div class="next-post pull-right"><a href="/2018/05/06/Leetcode-378.-Kth-Smallest-Element-in-a-Sorted-Matrix/"><span>Leetcode 378. Kth Smallest Element in a Sorted Matrix</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">©2013 - 2018 By Nick</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span> |  </span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/fancybox.js"></script><script src="/js/sidebar.js"></script><script src="/js/copy.js"></script><script src="/js/fireworks.js"></script><script src="/js/transition.js"></script><script src="/js/scroll.js"></script><script src="/js/head.js"></script></body></html>